# Comparing `tmp/odoo14_addon_purchase_order_ubl-14.0.1.0.1.dev4-py3-none-any.whl.zip` & `tmp/odoo14_addon_purchase_order_ubl-14.0.1.1.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,20 +1,20 @@
-Zip file size: 26872 bytes, number of entries: 18
--rw-r--r--  2.0 unx     3483 b- defN 21-Jun-18 03:03 odoo/addons/purchase_order_ubl/README.rst
--rw-r--r--  2.0 unx       87 b- defN 21-Jun-18 03:03 odoo/addons/purchase_order_ubl/__init__.py
--rw-r--r--  2.0 unx      508 b- defN 21-Jun-18 03:03 odoo/addons/purchase_order_ubl/__manifest__.py
--rw-r--r--  2.0 unx     1570 b- defN 21-Jun-18 03:03 odoo/addons/purchase_order_ubl/i18n/fr.po
--rw-r--r--  2.0 unx     1374 b- defN 21-Jun-18 03:03 odoo/addons/purchase_order_ubl/i18n/purchase_order_ubl.pot
--rw-r--r--  2.0 unx      110 b- defN 21-Jun-18 03:03 odoo/addons/purchase_order_ubl/models/__init__.py
--rw-r--r--  2.0 unx    10535 b- defN 21-Jun-18 03:03 odoo/addons/purchase_order_ubl/models/purchase.py
--rw-r--r--  2.0 unx     2039 b- defN 21-Jun-18 03:03 odoo/addons/purchase_order_ubl/models/report.py
--rw-r--r--  2.0 unx      129 b- defN 21-Jun-18 03:03 odoo/addons/purchase_order_ubl/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      891 b- defN 21-Jun-18 03:03 odoo/addons/purchase_order_ubl/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx     9455 b- defN 21-Jun-18 03:03 odoo/addons/purchase_order_ubl/static/description/icon.png
--rw-r--r--  2.0 unx    12961 b- defN 21-Jun-18 03:03 odoo/addons/purchase_order_ubl/static/description/index.html
--rw-r--r--  2.0 unx       98 b- defN 21-Jun-18 03:03 odoo/addons/purchase_order_ubl/tests/__init__.py
--rw-r--r--  2.0 unx     1209 b- defN 21-Jun-18 03:03 odoo/addons/purchase_order_ubl/tests/test_ubl_generate.py
--rw-r--r--  2.0 unx     4040 b- defN 21-Jun-18 03:03 odoo14_addon_purchase_order_ubl-14.0.1.0.1.dev4.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 21-Jun-18 03:03 odoo14_addon_purchase_order_ubl-14.0.1.0.1.dev4.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 21-Jun-18 03:03 odoo14_addon_purchase_order_ubl-14.0.1.0.1.dev4.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     1928 b- defN 21-Jun-18 03:03 odoo14_addon_purchase_order_ubl-14.0.1.0.1.dev4.dist-info/RECORD
-18 files, 50514 bytes uncompressed, 23548 bytes compressed:  53.4%
+Zip file size: 26980 bytes, number of entries: 18
+-rw-r--r--  2.0 unx     3483 b- defN 23-Jul-15 21:59 odoo/addons/purchase_order_ubl/README.rst
+-rw-r--r--  2.0 unx       87 b- defN 23-Jul-15 21:59 odoo/addons/purchase_order_ubl/__init__.py
+-rw-r--r--  2.0 unx      508 b- defN 23-Jul-15 22:00 odoo/addons/purchase_order_ubl/__manifest__.py
+-rw-r--r--  2.0 unx     1570 b- defN 23-Jul-15 21:59 odoo/addons/purchase_order_ubl/i18n/fr.po
+-rw-r--r--  2.0 unx     1374 b- defN 23-Jul-15 21:59 odoo/addons/purchase_order_ubl/i18n/purchase_order_ubl.pot
+-rw-r--r--  2.0 unx      110 b- defN 23-Jul-15 21:59 odoo/addons/purchase_order_ubl/models/__init__.py
+-rw-r--r--  2.0 unx    10569 b- defN 23-Jul-15 21:59 odoo/addons/purchase_order_ubl/models/purchase.py
+-rw-r--r--  2.0 unx     2319 b- defN 23-Jul-15 21:59 odoo/addons/purchase_order_ubl/models/report.py
+-rw-r--r--  2.0 unx      129 b- defN 23-Jul-15 21:59 odoo/addons/purchase_order_ubl/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      891 b- defN 23-Jul-15 21:59 odoo/addons/purchase_order_ubl/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx     9455 b- defN 23-Jul-15 21:59 odoo/addons/purchase_order_ubl/static/description/icon.png
+-rw-r--r--  2.0 unx    12961 b- defN 23-Jul-15 21:59 odoo/addons/purchase_order_ubl/static/description/index.html
+-rw-r--r--  2.0 unx       98 b- defN 23-Jul-15 21:59 odoo/addons/purchase_order_ubl/tests/__init__.py
+-rw-r--r--  2.0 unx     1209 b- defN 23-Jul-15 21:59 odoo/addons/purchase_order_ubl/tests/test_ubl_generate.py
+-rw-r--r--  2.0 unx     4073 b- defN 23-Jul-15 22:00 odoo14_addon_purchase_order_ubl-14.0.1.1.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-15 22:00 odoo14_addon_purchase_order_ubl-14.0.1.1.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jul-15 22:00 odoo14_addon_purchase_order_ubl-14.0.1.1.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     1908 b- defN 23-Jul-15 22:00 odoo14_addon_purchase_order_ubl-14.0.1.1.0.dist-info/RECORD
+18 files, 50841 bytes uncompressed, 23696 bytes compressed:  53.4%
```

## zipnote {}

```diff
@@ -36,20 +36,20 @@
 
 Filename: odoo/addons/purchase_order_ubl/tests/__init__.py
 Comment: 
 
 Filename: odoo/addons/purchase_order_ubl/tests/test_ubl_generate.py
 Comment: 
 
-Filename: odoo14_addon_purchase_order_ubl-14.0.1.0.1.dev4.dist-info/METADATA
+Filename: odoo14_addon_purchase_order_ubl-14.0.1.1.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo14_addon_purchase_order_ubl-14.0.1.0.1.dev4.dist-info/WHEEL
+Filename: odoo14_addon_purchase_order_ubl-14.0.1.1.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo14_addon_purchase_order_ubl-14.0.1.0.1.dev4.dist-info/top_level.txt
+Filename: odoo14_addon_purchase_order_ubl-14.0.1.1.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo14_addon_purchase_order_ubl-14.0.1.0.1.dev4.dist-info/RECORD
+Filename: odoo14_addon_purchase_order_ubl-14.0.1.1.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/purchase_order_ubl/__manifest__.py

```diff
@@ -1,13 +1,13 @@
 # Â© 2016-2017 Akretion (Alexis de Lattre <alexis.delattre@akretion.com>)
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 
 {
     "name": "Purchase Order UBL",
-    "version": "14.0.1.0.0",
+    "version": "14.0.1.1.0",
     "category": "Purchase Management",
     "license": "AGPL-3",
     "summary": "Embed UBL XML file inside the PDF purchase order",
     "author": "Akretion,Odoo Community Association (OCA)",
     "website": "https://github.com/OCA/edi",
     "depends": ["purchase", "base_ubl"],
     "installable": True,
```

## odoo/addons/purchase_order_ubl/models/purchase.py

```diff
@@ -241,26 +241,26 @@
         if doc_type:
             version = self.get_ubl_version()
             xml_filename = self.get_ubl_filename(doc_type, version=version)
             xml_string = self.generate_ubl_xml_string(doc_type, version=version)
             buffer = self._ubl_add_xml_in_pdf_buffer(xml_string, xml_filename, buffer)
         return buffer
 
-    def embed_ubl_xml_in_pdf(self, pdf_content):
+    def embed_ubl_xml_in_pdf(self, pdf_content, pdf_file=None):
         self.ensure_one()
         doc_type = self.get_ubl_purchase_order_doc_type()
         if doc_type:
             version = self.get_ubl_version()
             xml_filename = self.get_ubl_filename(doc_type, version=version)
             xml_string = self.generate_ubl_xml_string(doc_type, version=version)
             self._ubl_check_xml_schema(
                 xml_string, self.get_document_name(doc_type), version=version
             )
             pdf_content = self.embed_xml_in_pdf(
-                xml_string, xml_filename, pdf_content=pdf_content
+                xml_string, xml_filename, pdf_content=pdf_content, pdf_file=pdf_file
             )
         return pdf_content
 
     def get_ubl_purchase_order_doc_type(self):
         self.ensure_one()
         doc_type = False
         if self.state in self.get_rfq_states():
```

## odoo/addons/purchase_order_ubl/models/report.py

```diff
@@ -27,15 +27,22 @@
                 pdf_content = purchase_order.embed_ubl_xml_in_pdf(pdf_content)
         return pdf_content
 
     def _render_qweb_pdf(self, res_ids=None, data=None):
         """
         This is only necessary when tests are enabled.
         It forces the creation of pdf instead of html."""
-        if len(res_ids or []) == 1 and not self.env.context.get("no_embedded_ubl_xml"):
+        # Even if not expected, we might get an ID.
+        # Eg https://github.com/odoo/odoo/blob/10378872eddd6037f479fa8cbb3ed65d5e4b52c6
+        # /addons/account/models/account_bank_statement.py#L440
+        if (
+            isinstance(res_ids, int)
+            or len(res_ids or []) == 1
+            and not self.env.context.get("no_embedded_ubl_xml")
+        ):
             if len(self) == 1 and self.is_ubl_xml_to_embed_in_purchase_order():
                 self = self.with_context(force_report_rendering=True)
         return super()._render_qweb_pdf(res_ids, data)
 
     def is_ubl_xml_to_embed_in_purchase_order(self):
         return (
             self.model == "purchase.order"
```

## Comparing `odoo14_addon_purchase_order_ubl-14.0.1.0.1.dev4.dist-info/METADATA` & `odoo14_addon_purchase_order_ubl-14.0.1.1.0.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,18 +1,19 @@
 Metadata-Version: 2.1
 Name: odoo14-addon-purchase-order-ubl
-Version: 14.0.1.0.1.dev4
+Version: 14.0.1.1.0
 Summary: Embed UBL XML file inside the PDF purchase order
 Home-page: https://github.com/OCA/edi
 Author: Akretion,Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
+Classifier: Framework :: Odoo :: 14.0
 Classifier: License :: OSI Approved :: GNU Affero General Public License v3
 Requires-Python: >=3.6
 Requires-Dist: odoo14-addon-base-ubl
 Requires-Dist: odoo (<14.1dev,>=14.0a)
 
 ==================
 Purchase Order UBL
```

## Comparing `odoo14_addon_purchase_order_ubl-14.0.1.0.1.dev4.dist-info/RECORD` & `odoo14_addon_purchase_order_ubl-14.0.1.1.0.dist-info/RECORD`

 * *Files 12% similar despite different names*

```diff
@@ -1,18 +1,18 @@
 odoo/addons/purchase_order_ubl/README.rst,sha256=mC_rinWjw1gbryV7o3BBmW_CM4JmdD1snC5tXRfBmfY,3483
 odoo/addons/purchase_order_ubl/__init__.py,sha256=eShEGRadAlxopoLqIQ4-N42FM7MWPSuBe0h_l1cXTPM,87
-odoo/addons/purchase_order_ubl/__manifest__.py,sha256=YcX4lhaLEPwX27al72NT54lAgqIs7ZPJoXNvD_-ryvU,508
+odoo/addons/purchase_order_ubl/__manifest__.py,sha256=6yP0EDw5_5Gx7hWeELUGfv6uFYXQtS4v2OF75pbjsvA,508
 odoo/addons/purchase_order_ubl/i18n/fr.po,sha256=T3k_5SHr041JYzcA1uFVrywjlALNNDcmMSnIWgut5zY,1570
 odoo/addons/purchase_order_ubl/i18n/purchase_order_ubl.pot,sha256=OSDuaoVhtaDGKi8RbrdTUXENdqTwJ7lYekJarygn-eo,1374
 odoo/addons/purchase_order_ubl/models/__init__.py,sha256=OQGi8W_GiLj6Qw6uidzmePWV7SmrtamDgL1ZiqkE4UM,110
-odoo/addons/purchase_order_ubl/models/purchase.py,sha256=P3gjaDwDed6uTuCwhYIN6tYslTDBP8uHeWLuYRWHeaI,10535
-odoo/addons/purchase_order_ubl/models/report.py,sha256=VTdiNRqur63O3kGNZzzO4QFSfya9Qy3UrVFFDTCrM7c,2039
+odoo/addons/purchase_order_ubl/models/purchase.py,sha256=RmXwtvSneneFWkuhGIYuse2xNk96AZpLTTwZyT-j5cI,10569
+odoo/addons/purchase_order_ubl/models/report.py,sha256=U5RaWCE17smSUp1BkQhDf-AWTCaXVtuq9h1cP9VuBU4,2319
 odoo/addons/purchase_order_ubl/readme/CONTRIBUTORS.rst,sha256=eF53dVbC_pjCK4LD844xR2F2Dli6hzZHstBor7fbLxY,129
 odoo/addons/purchase_order_ubl/readme/DESCRIPTION.rst,sha256=5SkETQ7EpadxpCoM3XsbaBe1MI4Q0HSFFef8ReGVZJI,891
 odoo/addons/purchase_order_ubl/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
 odoo/addons/purchase_order_ubl/static/description/index.html,sha256=vihgFwxlQZr3eT-hFxXkLUtIObyZiRN2y6yzVHzAGDI,12961
 odoo/addons/purchase_order_ubl/tests/__init__.py,sha256=l8obyfGvaAM5YKgZL8crsG2I9Fq5vrL_x2dvnsipqfE,98
 odoo/addons/purchase_order_ubl/tests/test_ubl_generate.py,sha256=e28yy-98JWZ-Ruq6ES9LtbXfbt4gNMFxFCoemYIWjb4,1209
-odoo14_addon_purchase_order_ubl-14.0.1.0.1.dev4.dist-info/METADATA,sha256=bu9cf5k_AhITFxoNzZ1reQjT8kx8QBqB6v7C7YPYfXw,4040
-odoo14_addon_purchase_order_ubl-14.0.1.0.1.dev4.dist-info/WHEEL,sha256=OqRkF0eY5GHssMorFjlbTIq072vpHpF60fIQA6lS9xA,92
-odoo14_addon_purchase_order_ubl-14.0.1.0.1.dev4.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo14_addon_purchase_order_ubl-14.0.1.0.1.dev4.dist-info/RECORD,,
+odoo14_addon_purchase_order_ubl-14.0.1.1.0.dist-info/METADATA,sha256=dgQCbEAxQbaezZ7X03bkyBnblBqNi3gIa5fRQgDZAf0,4073
+odoo14_addon_purchase_order_ubl-14.0.1.1.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+odoo14_addon_purchase_order_ubl-14.0.1.1.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo14_addon_purchase_order_ubl-14.0.1.1.0.dist-info/RECORD,,
```

